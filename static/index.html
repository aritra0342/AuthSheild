<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AuthShield AI ‚Äî Security Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/static/style.css"/>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="login-page" class="login-page">
  <div class="login-bg">
    <div class="login-orb orb1"></div>
    <div class="login-orb orb2"></div>
    <div class="login-orb orb3"></div>
  </div>
  <div class="login-card">
    <div class="login-logo">
      <span class="shield-icon">üõ°Ô∏è</span>
      <div>
        <h1 class="login-title">AuthShield AI</h1>
        <p class="login-subtitle">Botnet Detection & Response Platform</p>
      </div>
    </div>
    <form id="login-form" class="login-form" onsubmit="handleLogin(event)">
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="login-username" placeholder="Enter username" autocomplete="username" required/>
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="login-password" placeholder="Enter password" autocomplete="current-password" required/>
      </div>
      <div id="login-error" class="login-error hidden">‚ùå Invalid credentials. Try again.</div>
      <button type="submit" class="btn-login" id="login-btn">
        <span id="login-btn-text">Sign In</span>
        <span id="login-spinner" class="spinner hidden"></span>
      </button>
    </form>
    <p class="login-hint">Secured by Auth0 ¬∑ Algorand Blockchain Audit</p>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN DASHBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="dashboard" class="dashboard hidden">

  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-brand">
      <span>üõ°Ô∏è</span>
      <span>AuthShield</span>
    </div>
    <div class="sidebar-menu">
      <a class="menu-item active" data-tab="events" onclick="switchTab('events')">
        <span class="menu-icon">üì°</span><span>Live Events</span>
      </a>
      <a class="menu-item" data-tab="demo" onclick="switchTab('demo')">
        <span class="menu-icon">üéØ</span><span>Attack Demo</span>
        <span class="menu-badge new">NEW</span>
      </a>
      <a class="menu-item" data-tab="clusters" onclick="switchTab('clusters')">
        <span class="menu-icon">üï∏Ô∏è</span><span>Clusters</span>
      </a>
      <a class="menu-item" data-tab="frozen" onclick="switchTab('frozen')">
        <span class="menu-icon">‚ùÑÔ∏è</span><span>Frozen Users</span>
        <span class="menu-badge frozen-badge" id="frozen-badge">0</span>
      </a>
      <a class="menu-item" data-tab="freezelog" onclick="switchTab('freezelog')">
        <span class="menu-icon">üìã</span><span>Freeze Log</span>
      </a>
      <a class="menu-item" data-tab="blockchain" onclick="switchTab('blockchain')">
        <span class="menu-icon">‚õìÔ∏è</span><span>Blockchain</span>
      </a>
    </div>
    <div class="sidebar-footer">
      <div class="status-dot connected" id="server-dot"></div>
      <span id="server-status-text">Connected</span>
      <button class="btn-logout" onclick="logout()">Logout</button>
    </div>
  </nav>

  <!-- Main content -->
  <main class="main-content">
    <!-- Top bar -->
    <div class="topbar">
      <div class="topbar-left">
        <h2 id="page-title">Live Events</h2>
        <span id="page-subtitle" class="page-subtitle">Real-time login activity</span>
      </div>
      <div class="topbar-right">
        <div class="threshold-bar">
          <label>Cluster Size</label>
          <input type="number" id="t-cluster" value="2" min="1" max="20"/>
          <label>Risk Score</label>
          <input type="number" id="t-risk" value="0.3" min="0" max="1" step="0.05"/>
          <button class="btn-save" onclick="saveThresholds()">Save</button>
        </div>
        <div class="user-badge">
          <span>üë§</span>
          <span id="logged-user">admin</span>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Live Events ‚îÄ‚îÄ -->
    <div id="tab-events" class="tab-content active">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value" id="stat-total">0</div>
          <div class="stat-label">Total Events</div>
        </div>
        <div class="stat-card">
          <div class="stat-value green" id="stat-legit">0</div>
          <div class="stat-label">Legit Users</div>
        </div>
        <div class="stat-card">
          <div class="stat-value red" id="stat-sus">0</div>
          <div class="stat-label">Suspicious</div>
        </div>
        <div class="stat-card">
          <div class="stat-value blue" id="stat-frozen-count">0</div>
          <div class="stat-label">Frozen</div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h3>Recent Login Events</h3>
          <button class="btn-sm" onclick="loadEvents()">‚Üª Refresh</button>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="events-table">
            <thead><tr>
              <th>User ID</th><th>IP Address</th><th>Risk Score</th>
              <th>Entropy</th><th>Status</th><th>Time</th>
            </tr></thead>
            <tbody id="events-body">
              <tr><td colspan="6" class="empty">Loading events...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Attack Demo ‚îÄ‚îÄ -->
    <div id="tab-demo" class="tab-content">
      <div class="demo-grid">
        <!-- Control panel -->
        <div class="card demo-control">
          <h3>üéØ Botnet Attack Simulation</h3>
          <p class="demo-desc">Simulate a coordinated credential-stuffing botnet attack and watch AuthShield detect and freeze all bot accounts in real time.</p>
          <div class="demo-steps">
            <div class="demo-step" id="step-1">
              <div class="step-num">1</div>
              <div>
                <strong>Seed ML Model</strong>
                <p>Train Isolation Forest on 400 synthetic normal logins</p>
              </div>
              <span class="step-status" id="step-1-status">‚è≥</span>
            </div>
            <div class="demo-step" id="step-2">
              <div class="step-num">2</div>
              <div>
                <strong>Legit Users Login</strong>
                <p>8 diverse real users from different devices & locations</p>
              </div>
              <span class="step-status" id="step-2-status">‚è≥</span>
            </div>
            <div class="demo-step" id="step-3">
              <div class="step-num">3</div>
              <div>
                <strong>ü§ñ Botnet Attack</strong>
                <p>12 bots from 45.152.66.x/24 ‚Äî same fingerprint, robotic typing</p>
              </div>
              <span class="step-status" id="step-3-status">‚è≥</span>
            </div>
            <div class="demo-step" id="step-4">
              <div class="step-num">4</div>
              <div>
                <strong>‚ùÑÔ∏è Freeze All Bots</strong>
                <p>Cluster detection ‚Üí Auth0 block ‚Üí Algorand audit trail</p>
              </div>
              <span class="step-status" id="step-4-status">‚è≥</span>
            </div>
          </div>
          <div class="demo-actions">
            <button class="btn-attack" id="btn-attack" onclick="runAttack()">
              ‚ñ∂ Run Bot Attack
            </button>
            <button class="btn-freeze-all" id="btn-freeze-all" onclick="freezeAll()" disabled>
              ‚ùÑÔ∏è Freeze All Bots
            </button>
          </div>
        </div>

        <!-- Live feed -->
        <div class="card demo-feed-card">
          <div class="card-header">
            <h3>üì° Live Attack Feed</h3>
            <button class="btn-sm" onclick="document.getElementById('attack-feed').innerHTML=''">Clear</button>
          </div>
          <div id="attack-feed" class="attack-feed"></div>
        </div>
      </div>

      <!-- Freeze result panel -->
      <div id="freeze-result" class="card freeze-result hidden">
        <div class="freeze-result-header">
          <span class="freeze-result-icon">‚ùÑÔ∏è</span>
          <div>
            <h3 id="freeze-result-title">Attack Neutralised!</h3>
            <p id="freeze-result-subtitle">All bot accounts have been frozen.</p>
          </div>
        </div>
        <div id="freeze-result-list" class="freeze-result-list"></div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Clusters ‚îÄ‚îÄ -->
    <div id="tab-clusters" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3>Detected Botnet Clusters</h3>
          <button class="btn-sm" onclick="loadClusters()">‚Üª Refresh</button>
        </div>
        <div id="clusters-body">
          <div class="empty">Click Refresh to load clusters</div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Frozen Users ‚îÄ‚îÄ -->
    <div id="tab-frozen" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3>‚ùÑÔ∏è Frozen Users Registry</h3>
          <div class="card-header-actions">
            <button class="btn-sm" onclick="loadFrozenUsers()">‚Üª Refresh</button>
          </div>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="frozen-table">
            <thead><tr>
              <th>User ID</th><th>IP Address</th><th>Risk Score</th>
              <th>Reason</th><th>Auth0</th><th>Blockchain</th><th>Frozen At</th><th>Action</th>
            </tr></thead>
            <tbody id="frozen-body">
              <tr><td colspan="8" class="empty">No frozen users yet. Run the Attack Demo to see them here.</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Freeze Log ‚îÄ‚îÄ -->
    <div id="tab-freezelog" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3>üìã Freeze / Unfreeze Audit Log</h3>
          <button class="btn-sm" onclick="loadFreezeLog()">‚Üª Refresh</button>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="freeze-log-table">
            <thead><tr>
              <th>User ID</th><th>Action</th><th>Reason</th><th>Risk Score</th><th>Cluster</th><th>Timestamp</th>
            </tr></thead>
            <tbody id="freeze-log-body">
              <tr><td colspan="6" class="empty">No freeze actions yet.</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ TAB: Blockchain ‚îÄ‚îÄ -->
    <div id="tab-blockchain" class="tab-content">
      <div class="bchain-grid">
        <div class="card bchain-status">
          <h3>Algorand Status</h3>
          <div class="bchain-info" id="bchain-info">Loading...</div>
          <button class="btn-sm" onclick="loadBlockchain()">‚Üª Refresh</button>
        </div>
        <div class="card">
          <h3>Generate TestNet Wallet</h3>
          <p class="text-dim">Generate a free testnet wallet to fund and use for blockchain logging.</p>
          <button class="btn-primary" onclick="generateWallet()">Generate New Wallet</button>
          <div id="wallet-result" class="wallet-result hidden"></div>
        </div>
      </div>
      <div class="card bchain-actions-card">
        <h3>Blockchain Actions</h3>
        <div class="bchain-actions">
          <div class="bchain-action-card red">
            <h4>Log Freeze to Blockchain</h4>
            <input type="text" id="bc-freeze-uid" placeholder="User ID"/>
            <input type="number" id="bc-freeze-risk" value="0.85" step="0.01" min="0" max="1"/>
            <button class="btn-danger" onclick="bcLogFreeze()">Log Freeze</button>
          </div>
          <div class="bchain-action-card green">
            <h4>Mint Verified Badge (NFT)</h4>
            <input type="text" id="bc-badge-uid" placeholder="User ID"/>
            <input type="number" id="bc-badge-risk" value="0.15" step="0.01" min="0" max="1"/>
            <button class="btn-success" onclick="bcMintBadge()">Mint Badge</button>
          </div>
          <div class="bchain-action-card blue">
            <h4>Update Reputation</h4>
            <input type="text" id="bc-rep-uid" placeholder="User ID"/>
            <input type="number" id="bc-rep-risk" value="0.25" step="0.01" min="0" max="1"/>
            <button class="btn-primary" onclick="bcUpdateRep()">Update</button>
          </div>
          <div class="bchain-action-card purple">
            <h4>Freeze + Log</h4>
            <input type="text" id="bc-fl-uid" placeholder="User ID"/>
            <button class="btn-freeze" onclick="bcFreezeAndLog()">Freeze &amp; Log</button>
          </div>
        </div>
        <div id="bchain-action-result" class="bchain-result hidden"></div>
      </div>
    </div>

  </main>
</div><!-- end dashboard -->

<script src="/static/app.js"></script>
</body>
</html>
